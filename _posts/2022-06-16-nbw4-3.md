---
title:  "내일배움단 Web4.3"
categories: SpartaWeb
toc: true
toc_sticky: true
sidebar:
    nav: docs
---

# [웹개발 종합반] 4주 3일차 개발일지(4주 10-16강, 숙제)

<br>

## 💻TIL Web.403

## '나홀로 메모장' 프로젝트

## 1. 프로젝트 세팅

이번 프로젝트에서는, 이전에 만든 ['나홀로 링크 메모장' 페이지][1]를 서버와 연동해 입력한 URL과 리뷰가 카드 형태로 붙여질 수 있도록 할 것이다. URL만 입력하지만, 카드에서는 페이지의 이미지와 설명까지 딸려오며, 이것은 웹 스크래핑(크롤링)으로 가능한 것이다. 
<br>

먼저 새로운 프로젝트 폴더를 만들고(venv 체크!), 'templates', 'static' 폴더와 'app.py' 파일, 그리고 'templates' 폴더 안에 'index.html' 파일을 생성한다. 설정 > 프로젝트 > Python 인터프리터에 들어가 'flask', 'pymongo', 웹 크롤링에 필요한 'requests', 'bs4'를 설치한다.

<br>

## 2. API 설계하기

> 프로젝트를 시작하기 전, 만들고자 하는 서비스에 어떤 기능이 필요하고 그 기능을 어떠한 순서로 구현할 것인지 계획하는 설계 과정이 필요하다. 

'나홀로 링크 메모장'에 필요한 기능은 두 가지다. 첫 번째로, 클라이언트가 URL과 코멘트를 서버로 보내주고 서버는 그 데이터를 DB에 저장한다. 두 번째로, 서버에서 클라이언트로 데이터를 내려주고, 클라이언트는 화면에 카드들을 보여준다. DB에서는 이미지, 제목, 설명, 코멘트 데이터를 저장해야 한다. 카드에서 영화 제목을 클릭하면 해당 링크로 이동하기 때문에, 링크도 저장해 두어야 한다. 

<br>

먼저, 카드를 생성하는 API를 설계해보자. 설계는 **요청 정보(URL, 요청 방식, 요청 데이터 종류와 변수명) / 서버가 제공할 기능 / 응답 데이터**로 구성된다. 

### 1) 포스팅 API 설계(POST)

**① 요청 정보**

DB에 *새로운 데이터를 생성(create)*하는 것이기 때문에 POST 요청을 이용한다. URL은 '/memo'로, `url_give`로 URL 데이터를, `comment_give`로 코멘트 데이터를 받는다.

<br>

**② 서버가 제공할 기능**

서버는 클라이언트 쪽에서 받아온 URL의 메타 태그 정보를 바탕으로 제목, 설명, 이미지 주소(URL)를 스크래핑한다. 그 다음 스크래핑한 데이터를 모두 DB에 저장한다.

<br>

**③ 응답 데이터**

서버가 데이터를 DB에 잘 저장했다면, 클라이언트에게 API가 정상적으로 작동함을 알리는 success 메세지를 준다. 메세지는 JSON 형식으로 `'result' = 'success'`를 입력한다.

<br>

### 2) 리스팅 API 설계(GET)

**① 요청 정보**

저장된 카드를 *보여주는(read)* 것이기 때문에 GET 요청을 사용한다. 포스팅 API와 같은 '/memo' URL을 사용하고, 클라이언트 쪽에서 받는 데이터 없이, DB에 저장된 데이터를 조회하는 것이기 때문에 요청할 데이터는 없다.

<br>

**② 서버가 제공할 기능**

서버는 DB에 저장되어 있는 모든 제목, 설명, 링크, 이미지 주소, 코멘트 정보를 가져온다.

<br>

**③ 응답 데이터**

각 기사들의 정보(제목, 설명, 링크, 이미지 주소, 코멘트)로 카드를 만들어서 붙여야 한다. JSON 형식으로 `'articles': 기사 정보`를 입력한다. 이 리스팅 API는 클라이언트에서 로딩되자마자 호출된다는 것도 기억하자. 

<br>

'기사 저장' 버튼에 Ajax 콜, 로딩되자마자 호출하는 것에 Ajax 콜을 만든다. 복습 차원에서, Ajax는 자바스크립트를 이용해 페이지 전환 없이 서버에서 값을 받아오는 방법이다. [2주차 Ajax 관련 개발일지][2]를 참고하자.





[1]: https://yendoz.github.io/spartaweb/nbw3-1/#%EB%B3%B5%EC%8A%B5-%EB%82%98%ED%99%80%EB%A1%9C-%EB%A9%94%EB%AA%A8%EC%9E%A5%EC%97%90-openapi-%EB%B6%99%EC%97%AC%EB%B3%B4%EA%B8%B0
[2]: https://yendoz.github.io/spartaweb/nbw2-2/#1-json